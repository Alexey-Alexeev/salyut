# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ–∫–ª–∞–º–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üéØ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–°–æ–∑–¥–∞–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è pre-rendered —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π —Å **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π**.

### –û—Å–Ω–æ–≤–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **Pre-rendered —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞** `/catalog/promo/fireworks/`
   - –î–∞–Ω–Ω—ã–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ —Å–±–æ—Ä–∫–µ (build time)
   - HTML —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Ç–æ–≤–∞—Ä—ã —Å—Ä–∞–∑—É
   - –ù–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ

2. **–ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Service Worker**
   - –û—Ç–¥–µ–ª—å–Ω—ã–π –∫—ç—à –¥–ª—è –ø—Ä–æ–º–æ —Å—Ç—Ä–∞–Ω–∏—Ü (PROMO_CACHE)
   - –°—Ç—Ä–∞—Ç–µ–≥–∏—è "cache-first, update in background"
   - –•—Ä–∞–Ω–µ–Ω–∏–µ 7 –¥–Ω–µ–π (vs 24 —á–∞—Å–∞ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü)

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç**
   - –°—Ç–∞—Ä–∞—è —Å—Å—ã–ª–∫–∞ `/catalog/?category=Fireworks&category=Fan-salutes&sortBy=price-asc`
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ `/catalog/promo/fireworks/`

4. **Preload –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤**
   - Preconnect –∫ Supabase –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - Preload –ø–µ—Ä–≤—ã—Ö 4 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ç–æ–≤–∞—Ä–æ–≤
   - –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è LCP (Largest Contentful Paint)

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞: ~2-3 —Å–µ–∫—É–Ω–¥—ã
- API –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞: ~300-500ms (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞: ~50-100ms (–∏–∑ –∫—ç—à–∞)
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –≤ HTML

## üîó –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –°—Ç–∞—Ä–∞—è —Å—Å—ã–ª–∫–∞ (—Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è):
```
https://salutgrad.ru/catalog/?category=Fireworks&category=Fan-salutes&sortBy=price-asc
```

### –ù–æ–≤–∞—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Å—ã–ª–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
```
https://salutgrad.ru/catalog/promo/fireworks/
```

## üìù –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º—ã

### –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç / Google Ads:

1. –ó–∞–º–µ–Ω–∏—Ç–µ URL –≤ —Ä–µ–∫–ª–∞–º–Ω–æ–π –∫–∞–º–ø–∞–Ω–∏–∏ –Ω–∞:
   ```
   https://salutgrad.ru/catalog/promo/fireworks/
   ```

2. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
   - ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ = –º–µ–Ω—å—à–µ –æ—Ç–∫–∞–∑–æ–≤
   - ‚úÖ –õ—É—á—à–∏–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞
   - ‚úÖ –ù–∏–∂–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–ª–∏–∫–∞
   - ‚úÖ –í—ã—à–µ –∫–æ–Ω–≤–µ—Ä—Å–∏—è

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤:
```
app/
  catalog/
    promo/
      fireworks/
        page.tsx         # –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (pre-render)
        promo-client.tsx # –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)
```

### Service Worker:
```
public/sw.js
  - PROMO_CACHE: –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫—ç—à –¥–ª—è –ø—Ä–æ–º–æ —Å—Ç—Ä–∞–Ω–∏—Ü
  - PROMO_URLS: —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–º–æ URL
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å—Ç–∞—Ä—ã—Ö —Å—Å—ã–ª–æ–∫
```

### –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞:
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
navigator.serviceWorker.controller.postMessage({
  type: 'CLEAR_CACHE'
});
```

## üöÄ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–æ–º–æ —Å—Ç—Ä–∞–Ω–∏—Ü

### –ü—Ä–∏–º–µ—Ä: —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–º–æ –¥–ª—è —Ä–∏–º—Å–∫–∏—Ö —Å–≤–µ—á–µ–π

1. –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:
   ```
   app/catalog/promo/roman-candles/
   ```

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –∏–∑ `fireworks/`:
   - `page.tsx`
   - `promo-client.tsx`

3. –û–±–Ω–æ–≤–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:
   ```typescript
   // page.tsx
   const [categories, productsResponse, stats] = await Promise.all([
     getCategoriesData(),
     getProductsDataWithCategories(['Roman-candles'], 1, 20, 'price-asc'),
     getProductsStatsData(),
   ]);
   ```

4. –î–æ–±–∞–≤—å—Ç–µ –≤ Service Worker:
   ```javascript
   // public/sw.js
   const PROMO_URLS = [
     '/catalog/promo/fireworks/',
     '/catalog/promo/roman-candles/', // –ù–æ–≤–∞—è –ø—Ä–æ–º–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞
   ];
   ```

5. –û–±–Ω–æ–≤–∏—Ç–µ –≤–µ—Ä—Å–∏—é –∫—ç—à–∞:
   ```javascript
   const CACHE_NAME = 'salutgrad-v3'; // –£–≤–µ–ª–∏—á—å—Ç–µ –≤–µ—Ä—Å–∏—é
   ```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –∫—ç—à–∞:
1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Application ‚Üí Cache Storage
2. –ù–∞–π–¥–∏—Ç–µ `salutgrad-promo-v2`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ `/catalog/promo/fireworks/`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network
2. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
3. –ü—Ä–æ–º–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∏–∑ "Service Worker"

### Lighthouse —Ç–µ—Å—Ç:
```bash
npm install -g lighthouse
lighthouse https://salutgrad.ru/catalog/promo/fireworks/ --view
```

–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- Performance: 95+
- First Contentful Paint: < 1s
- Largest Contentful Paint: < 1.5s
- Time to Interactive: < 2s

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

### –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤:
1. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç: `npm run build` (–æ–¥–∏–Ω —Ä–∞–∑)
2. –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–í–∞–∂–Ω–æ:** –í–µ—Ä—Å–∏—é Service Worker –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –º–µ–Ω—è–ª–∏ –ª–æ–≥–∏–∫—É –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ `sw.js`. –î–ª—è –æ–±—ã—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ —ç—Ç–æ –ù–ï –Ω—É–∂–Ω–æ.

### –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ Service Worker:
–í–µ—Ä—Å–∏—é SW –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å **—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—ã –º–µ–Ω—è–ª–∏ –ª–æ–≥–∏–∫—É –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è**:
```javascript
const CACHE_NAME = 'salutgrad-v3'; // –£–≤–µ–ª–∏—á—å—Ç–µ —á–∏—Å–ª–æ
const STATIC_CACHE = 'salutgrad-static-v3';
const DYNAMIC_CACHE = 'salutgrad-dynamic-v3';
const PROMO_CACHE = 'salutgrad-promo-v3';
```

**–î–ª—è –æ–±—ã—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤:**
- –ü—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `npm run build` –æ–¥–∏–Ω —Ä–∞–∑
- –§–∞–π–ª `sw.js` –∏–∑ `public/` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ `out/`
- –í–µ—Ä—Å–∏—é –º–µ–Ω—è—Ç—å –ù–ï –Ω—É–∂–Ω–æ

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–±–ª–µ–º–∞: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è
```javascript
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é SW
navigator.serviceWorker.getRegistration()
  .then(reg => console.log('SW registered:', reg));
```

### –ü—Ä–æ–±–ª–µ–º–∞: —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∫—ç—à–µ
```javascript
// –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –ø—Ä–æ–º–æ —Å—Ç—Ä–∞–Ω–∏—Ü
caches.delete('salutgrad-promo-v2');
// –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
location.reload();
```

### –ü—Ä–æ–±–ª–µ–º–∞: —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Service Worker –∞–∫—Ç–∏–≤–µ–Ω
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ URL —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —É—Å–ª–æ–≤–∏–µ–º –≤ `sw.js`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab –≤ DevTools
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Service Worker –∞–∫—Ç–∏–≤–µ–Ω
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-03  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** Production Ready ‚úÖ

