# –û—Ç–ª–∞–¥–∫–∞ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏ - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üîç –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

–Ø –¥–æ–±–∞–≤–∏–ª —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö —Ä–∞–±–æ—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ú–µ—Ç—Ä–∏–∫–∏, —á—Ç–æ–±—ã —Ç–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –≥–¥–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º–∞.

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏

### –ù–∞ localhost (development)

```
[Metrika] Component mounted
[Metrika] Script loaded
[Metrika] sendPageView called: {url: "/", isInitialHit: true, hostname: "localhost"}
[Metrika] Environment check: {isProduction: false, isDevelopment: true, hostname: "localhost", expectedHostname: "salutgrad.ru"}
[Metrika DEV] Page view: / {isInitialHit: true}
```

### –ù–∞ production (salutgrad.ru)

```
[Metrika] Component mounted
[Metrika] Script loaded
[Metrika] sendPageView called: {url: "/", isInitialHit: true, hostname: "salutgrad.ru"}
[Metrika] Environment check: {isProduction: true, isDevelopment: false, hostname: "salutgrad.ru", expectedHostname: "salutgrad.ru"}
[Metrika] Counter ready after 300 ms
[Metrika] Hit sent: {url: "https://salutgrad.ru/", title: "...", isInitialHit: true}
```

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### 1. –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000 –∏ **—Å—Ä–∞–∑—É –∂–µ** –æ—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12).

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**

1. ‚úÖ –ï—Å—Ç—å –ª–∏ –ª–æ–≥ `[Metrika] Component mounted`?
   - **–î–ê** ‚Üí –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è, –∏–¥–µ–º –¥–∞–ª—å—à–µ
   - **–ù–ï–¢** ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

2. ‚úÖ –ï—Å—Ç—å –ª–∏ –ª–æ–≥ `[Metrika] Script loaded`?
   - **–î–ê** ‚Üí —Å–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –∏–¥–µ–º –¥–∞–ª—å—à–µ
   - **–ù–ï–¢** ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Å–∫—Ä–∏–ø—Ç–∞

3. ‚úÖ –ï—Å—Ç—å –ª–∏ –ª–æ–≥ `[Metrika DEV] Page view:`?
   - **–î–ê** ‚Üí –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ dev —Ä–µ–∂–∏–º–µ!
   - **–ù–ï–¢** ‚Üí —Å–º–æ—Ç—Ä–∏–º –¥—Ä—É–≥–∏–µ –ª–æ–≥–∏

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ production

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è, –æ—Ç–∫—Ä–æ–π—Ç–µ https://salutgrad.ru —Å **–æ—Ç–∫—Ä—ã—Ç–æ–π –∫–æ–Ω—Å–æ–ª—å—é** (F12 **–î–û** –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã).

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**

1. ‚úÖ –ï—Å—Ç—å –ª–∏ –ª–æ–≥ `[Metrika] Component mounted`?
2. ‚úÖ –ï—Å—Ç—å –ª–∏ –ª–æ–≥ `[Metrika] Script loaded`?
3. ‚úÖ –ï—Å—Ç—å –ª–∏ –ª–æ–≥ `[Metrika] Counter ready`?
4. ‚úÖ –ï—Å—Ç—å –ª–∏ –ª–æ–≥ `[Metrika] Hit sent`?

## üö® –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –í–æ–æ–±—â–µ –Ω–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –ª–æ–≥–æ–≤

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

1. **–ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –∑–∞–¥–µ–ø–ª–æ–µ–Ω—ã**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª –∏–∑–º–µ–Ω–µ–Ω
   git status
   
   # –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
   npm run dev  # –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
   # –∏–ª–∏
   npm run build  # –¥–ª—è production
   ```

2. **–ö–æ–Ω—Å–æ–ª—å –æ—Ç–∫—Ä—ã—Ç–∞ –Ω–µ –≤–æ–≤—Ä–µ–º—è**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12)
   - –ó–∞—Ç–µ–º —Å–¥–µ–ª–∞–π—Ç–µ Ctrl+R (–æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É)
   - –õ–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Å—Ä–∞–∑—É

3. **–£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª–∏**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∏–ª—å—Ç—Ä –≤ –∫–æ–Ω—Å–æ–ª–∏ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å "All" –∏–ª–∏ "Info")
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–µ –≤–∫–ª—é—á–µ–Ω "Hide network messages"

4. **JavaScript –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–ª–æ–º–∞–Ω**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –µ—Å—Ç—å –ª–∏ –¥—Ä—É–≥–∏–µ –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ (–∫—Ä–∞—Å–Ω—ã–º —Ü–≤–µ—Ç–æ–º)
   - –ï—Å–ª–∏ –µ—Å—Ç—å - —Å–∫–∏–Ω—å—Ç–µ —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ï—Å—Ç—å —Ç–æ–ª—å–∫–æ `[Metrika] Component mounted`

**–ü—Ä–∏—á–∏–Ω–∞**: –°–∫—Ä–∏–ø—Ç –ú–µ—Ç—Ä–∏–∫–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è.

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**

1. **–ë–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–∏ —Ä–µ–∫–ª–∞–º—ã**
   ```
   - –û—Ç–∫–ª—é—á–∏—Ç–µ AdBlock, uBlock –∏ –¥—Ä—É–≥–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ
   ```

2. **Network –∑–∞–ø—Ä–æ—Å—ã**
   - –û—Ç–∫—Ä–æ–π—Ç–µ F12 ‚Üí Network
   - –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
   - –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ `mc.yandex.ru`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –µ–≥–æ —Å—Ç–∞—Ç—É—Å (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 200)

3. **–û—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –µ—Å—Ç—å –ª–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –ª–æ–≥ `[Metrika] Script loading failed`
   - –ï—Å–ª–∏ –µ—Å—Ç—å - —Å–∫—Ä–∏–ø—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

4. **Fallback —Ç–∞–π–º–µ—Ä**
   - –ü–æ–¥–æ–∂–¥–∏—Ç–µ 3 —Å–µ–∫—É–Ω–¥—ã
   - –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥ `[Metrika] Fallback initialization after 3s`

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–µ–Ω, –Ω–æ `sendPageView` –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–æ–±–ª–µ–º–∞ –≤ –ª–æ–≥–∏–∫–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**

1. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –º–µ–∂–¥—É `Script loaded` –∏ –¥–∞–ª—å—à–µ
2. –°–∫–∏–Ω—å—Ç–µ –≤—Å–µ –ª–æ–≥–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `[Metrika]`

### –ü—Ä–æ–±–ª–µ–º–∞ 4: `sendPageView` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –Ω–æ –Ω–µ—Ç `Hit sent`

**–ü—Ä–∏—á–∏–Ω–∞**: –°—á–µ—Ç—á–∏–∫ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è.

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ `window.ym` –≤ –∫–æ–Ω—Å–æ–ª–∏:
   ```javascript
   console.log(typeof window.ym);  // –î–æ–ª–∂–Ω–æ –±—ã—Ç—å "function"
   ```

2. –ï—Å–ª–∏ `undefined` - —Å—á–µ—Ç—á–∏–∫ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network –∑–∞–ø—Ä–æ—Å—ã –∫ `tag.js`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–∏

## üß™ –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
console.log('Checking Metrika...');

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏ ym
console.log('window.ym type:', typeof window.ym);

// –ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å hit –≤—Ä—É—á–Ω—É—é
if (typeof window.ym === 'function') {
  window.ym(104700931, 'hit', window.location.href, {
    title: 'Manual test'
  });
  console.log('Manual hit sent!');
} else {
  console.error('window.ym is not a function!');
}
```

## üìù –ß—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –º–Ω–µ, –µ—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ:

1. **–í—Å–µ –ª–æ–≥–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏** (—Å–∫—Ä–∏–Ω—à–æ—Ç –∏–ª–∏ —Ç–µ–∫—Å—Ç)
   - –õ–æ–≥–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `[Metrika]`
   - –õ—é–±—ã–µ –∫—Ä–∞—Å–Ω—ã–µ –æ—à–∏–±–∫–∏

2. **–°–∫—Ä–∏–Ω—à–æ—Ç Network –≤–∫–ª–∞–¥–∫–∏**
   - –§–∏–ª—å—Ç—Ä: `yandex` –∏–ª–∏ `mc.yandex`
   - –ü–æ–∫–∞–∂–∏—Ç–µ —Å—Ç–∞—Ç—É—Å –∑–∞–ø—Ä–æ—Å–æ–≤

3. **–†–µ–∑—É–ª—å—Ç–∞—Ç —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏**
   - –ß—Ç–æ –ø–æ–∫–∞–∑–∞–ª `typeof window.ym`
   - –ë—ã–ª–∞ –ª–∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ä—É—á–Ω–æ–≥–æ hit —É—Å–ø–µ—à–Ω–æ–π

4. **–û–∫—Ä—É–∂–µ–Ω–∏–µ**
   - localhost –∏–ª–∏ production?
   - –ö–∞–∫–æ–π –±—Ä–∞—É–∑–µ—Ä?
   - –ï—Å—Ç—å –ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è-–±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–∏?

## üîÑ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
   ```bash
   npm run dev
   ```
3. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000
4. **–°—Ä–∞–∑—É** –æ—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12)
5. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+R)
6. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫–∏–µ –ª–æ–≥–∏ `[Metrika]` –ø–æ—è–≤–∏–ª–∏—Å—å
7. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

## üí° –í–∞–∂–Ω–æ

- –ö–æ–Ω—Å–æ–ª—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç–∞ **–î–û** –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ª–æ–≥–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –ø–µ—Ä–≤—ã–µ 100-300ms
- –ï—Å–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –∑–∞–∫—Ä—ã—Ç–æ–π –∫–æ–Ω—Å–æ–ª—å—é, –ª–æ–≥–∏ –º–æ–≥—É—Ç –ø—Ä–æ–ø–∞—Å—Ç—å
- –í —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è-–±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–∏ –æ–±—ã—á–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω—ã

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ –ª–æ–≥–∏!

